<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Space Demo</title>
    <link href="stylesheets/screen.css" media="all" rel="stylesheet" type="text/css"/>
    <script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
    <script language="javascript" src="javascripts/jquery.hotkeys.js" type="text/javascript"></script>
    <script language="javascript" src="javascripts/key_status.js" type="text/javascript"></script>
    <script language="javascript" src="javascripts/util.js" type="text/javascript"></script>
    <script language="javascript" src="javascripts/sprite.js" type="text/javascript"></script>
    <script language="javascript" src="javascripts/sound.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="gameboard">

    </div>
    <h1>Space Demo</h1>
    <script type='text/javascript'>
      var CANVAS_WIDTH = 480;
      var CANVAS_HEIGHT = 320;

      var canvasElement = $("<canvas width='" + CANVAS_WIDTH +
                            "' height='" + CANVAS_HEIGHT + "'></canvas>");
      var canvas = canvasElement.get(0).getContext("2d");
      canvasElement.appendTo('body');
      canvas.fillStyle = "#000"; // Set color to black


      var FPS = 30;
      var xVelocity = 3;
      var yVelocity = 4;

      var paddle = {
        color: '#000',
        width: 10,
        height: 50,
        x: 10,
        y: 10,
        draw: function() {
          canvas.fillStyle = this.color;
          canvas.fillRect(this.x, this.y, this.width, this.height);
        }
      }

      var ball = {
        color: '#000',
        width: 10,
        height: 10,
        x: CANVAS_WIDTH / 2,
        y: CANVAS_HEIGHT / 2,
        draw: function() {
          canvas.fillStyle = this.color;
          canvas.fillRect(this.x, this.y, this.width, this.height);
        }
      }

      function move(ball) {
        ball.x += xVelocity;
        ball.y += yVelocity;
      }

      function collideWithWall(ball) {
        if (ball.x > CANVAS_WIDTH || ball.x < 0)
        {
          xVelocity = xVelocity * -1;
        }
        else if (ball.y > CANVAS_HEIGHT || ball.y < 0)
        {
          yVelocity = yVelocity * -1;
        }
      }

      $(document).keydown( function(e) {
        e.preventDefault();
        if (e.which == 38) {
          paddle.y -= 10;
        }
        if (e.which == 40) {
          paddle.y += 10;
        }
      })

      function update() {
        move(ball);
        collideWithWall(ball);
      }

      function draw() {
        canvas.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
        paddle.draw();
        ball.draw();
      }

      setInterval(function() {
        update();
        draw();
      }, 1000/FPS);

    </script>
  </body>
</html>
